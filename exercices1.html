<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejercicios: Identidad y Profesiones</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .fr-accent-btn {
            @apply bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-1 px-3 rounded shadow text-lg cursor-pointer transition;
        }
        .correct-answer {
            @apply border-green-500 bg-green-50 text-green-700;
        }
        .wrong-answer {
            @apply border-red-500 bg-red-50 text-red-700;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">

    <!-- HEADER -->
    <header class="bg-indigo-700 text-white p-6 shadow-md">
        <div class="max-w-4xl mx-auto">
            <h1 class="text-3xl font-bold flex items-center gap-3">
                <i class="fas fa-pen-nib"></i> Pr√°ctica: Lecci√≥n 1
            </h1>
            <p class="mt-2 text-indigo-200">Duraci√≥n estimada: 30 min | 4 Ejercicios Diversos</p>
        </div>
    </header>

    <!-- FLOATING ACCENT BAR (Sticky top for mobile/desktop) -->
    <div class="sticky top-0 z-50 bg-white border-b shadow-sm p-2 flex justify-center gap-2 overflow-x-auto">
        <span class="text-xs font-bold text-gray-500 self-center mr-2 hidden sm:block">Caracteres:</span>
        <button onclick="insertChar('√©')" class="fr-accent-btn">√©</button>
        <button onclick="insertChar('√®')" class="fr-accent-btn">√®</button>
        <button onclick="insertChar('√†')" class="fr-accent-btn">√†</button>
        <button onclick="insertChar('√ß')" class="fr-accent-btn">√ß</button>
        <button onclick="insertChar('√™')" class="fr-accent-btn">√™</button>
        <button onclick="insertChar('√Æ')" class="fr-accent-btn">√Æ</button>
        <button onclick="insertChar('√¥')" class="fr-accent-btn">√¥</button>
    </div>

    <main class="max-w-4xl mx-auto p-6 space-y-12">

        <!-- EXERCISE 1: PROFESSIONS & ARTICLES -->
        <section id="ex1" class="bg-white p-6 rounded-xl shadow-md border-t-4 border-indigo-500">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-2">1. La Regla de Oro: Profesiones sin Art√≠culo</h2>
                <div class="bg-indigo-50 p-4 rounded-lg text-sm text-indigo-800 border border-indigo-200">
                    <p><strong>Regla:</strong> No digas "Je suis <s>un</s> avocat". Di "Je suis avocat".<br>
                    <strong>G√©nero:</strong> F√≠jate si el sujeto es hombre (Il) o mujer (Elle/Je femenino).</p>
                </div>
            </div>

            <div class="space-y-4" id="container-ex1">
                <!-- Questions generated via JS -->
            </div>
        </section>

        <!-- EXERCISE 2: √äTRE vs AVOIR -->
        <section id="ex2" class="bg-white p-6 rounded-xl shadow-md border-t-4 border-pink-500">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-2">2. Batalla de Verbos: √ätre vs. Avoir</h2>
                <div class="bg-pink-50 p-4 rounded-lg text-sm text-pink-800 border border-pink-200 grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <strong>√äTRE (Ser/Estar):</strong>
                        <ul class="list-disc ml-4">
                            <li>Je suis, Tu es, Il est</li>
                            <li>Nous sommes, Vous √™tes, Ils sont</li>
                        </ul>
                    </div>
                    <div>
                        <strong>AVOIR (Tener/Edad):</strong>
                        <ul class="list-disc ml-4">
                            <li>J'ai, Tu as, Il a</li>
                            <li>Nous avons, Vous avez, Ils ont</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="space-y-4" id="container-ex2">
                <!-- Questions generated via JS -->
            </div>
        </section>

        <!-- EXERCISE 3: GENDER & NATIONALITY -->
        <section id="ex3" class="bg-white p-6 rounded-xl shadow-md border-t-4 border-blue-500">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-2">3. Vocabulario y Femeninos</h2>
                <div class="bg-blue-50 p-4 rounded-lg text-sm text-blue-800 border border-blue-200">
                    <p><strong>Tip:</strong> Generalmente agregamos una "e" para el femenino.<br>
                    <em>Am√©ricain -> Am√©ricaine</em> | <em>Directeur -> Directrice</em></p>
                </div>
            </div>

            <div class="space-y-4" id="container-ex3">
                <!-- Questions generated via JS -->
            </div>
        </section>

        <!-- EXERCISE 4: TRANSLATION SYNTHESIS -->
        <section id="ex4" class="bg-white p-6 rounded-xl shadow-md border-t-4 border-green-600">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-2">4. Traducci√≥n Contextual</h2>
                <p class="text-sm text-gray-600 mb-2">Traduce estas frases t√≠picas de oficina usando el vocabulario visto. Presta atenci√≥n a la ortograf√≠a.</p>
            </div>

            <div class="space-y-4" id="container-ex4">
                <!-- Questions generated via JS -->
            </div>
        </section>

        <!-- FINAL MESSAGE -->
        <div id="final-success" class="hidden bg-green-100 p-8 rounded-xl text-center border-2 border-green-500 shadow-lg">
            <h2 class="text-3xl font-bold text-green-800 mb-4">¬°F√©licitations! üéâ</h2>
            <p class="text-lg text-green-700">Has completado la lecci√≥n. Ya est√°s listo para presentarte en Savoir.</p>
            <button onclick="location.reload()" class="mt-6 bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700 font-bold shadow">
                Volver a practicar
            </button>
        </div>

    </main>

    <script>
        // EXERCISE DATA
        const exercises = [
            {
                id: "ex1",
                questions: [
                    { q: "Traduce: 'Soy contador' (hombre)", a: "je suis comptable" },
                    { q: "Traduce: 'Ella es directora'", a: "elle est directrice" },
                    { q: "Traduce: '√âl es pasante' (becario)", a: "il est stagiaire" },
                    { q: "Traduce: 'Nosotros somos dise√±adores de moda'", a: "nous sommes cr√©ateurs de mode" },
                    { q: "Traduce: 'T√∫ (informal) eres influencer'", a: "tu es influenceuse" },
                    { q: "Traduce: 'Ustedes son propietarios'", a: "vous √™tes propri√©taires" }
                ]
            },
            {
                id: "ex2",
                questions: [
                    { q: "Completa: J'___ 25 ans. (Tengo)", a: "ai" },
                    { q: "Completa: Nous _______ en retard. (Estamos)", a: "sommes" },
                    { q: "Completa: Tu ___ une r√©union ? (Tienes)", a: "as" },
                    { q: "Completa: Ils ____ chinois. (Son)", a: "sont" },
                    { q: "Completa: Vous ____ besoin de caf√© ? (Tienen)", a: "avez" },
                    { q: "Completa: Elle ___ l'air fatigu√©e. (Parece/Tiene aspecto)", a: "a" }
                ]
            },
            {
                id: "ex3",
                questions: [
                    { q: "Pasa al femenino: 'Il est am√©ricain'", a: "elle est am√©ricaine" },
                    { q: "Pasa al femenino: 'Il est directeur'", a: "elle est directrice" },
                    { q: "Pasa al femenino: 'Il est allemand'", a: "elle est allemande" },
                    { q: "Traduce (palabra exacta): 'La oficina'", a: "le bureau" },
                    { q: "Traduce (palabra exacta): 'Estar de acuerdo' (infinitivo)", a: "√™tre d'accord" },
                    { q: "Escribe en franc√©s: 'El ejecutivo de cuentas'", a: "le charg√© de client√®le" }
                ]
            },
            {
                id: "ex4",
                questions: [
                    { q: "Traduce: 'Estoy de acuerdo.'", a: "je suis d'accord" },
                    { q: "Traduce: 'Tengo una reuni√≥n.'", a: "j'ai une r√©union" },
                    { q: "Traduce: 'Ella est√° de vacaciones.'", a: "elle est en vacances" },
                    { q: "Traduce: 'Llegas tarde.' (T√∫...)", a: "tu es en retard" },
                    { q: "Traduce: 'Necesito un caf√©.' (Tengo necesidad de...)", a: "j'ai besoin d'un caf√©" }, // Assuming basic vocab or based on lesson structure "J'ai besoin de..."
                    // Correction: Based on strictly lesson vocab list "J'ai besoin de..." + generic un caf√©. 
                    // Let's make it safer based strictly on lesson vocab:
                    // "J'ai besoin de..." is in vocab. "le bureau" is in vocab.
                    { q: "Traduce: 'Necesito la oficina.'", a: "j'ai besoin du bureau" } 
                ]
            }
        ];

        // Override specific difficult question for better user experience based on strictly provided vocab
        exercises[3].questions[4] = { q: "Traduce: 'Usted tiene raz√≥n.' (No, espera, usa vocabulario de lecci√≥n: 'Usted tiene 30 a√±os')", a: "vous avez 30 ans" };
        exercises[3].questions[5] = { q: "Traduce: 'Nosotros estamos en la oficina.'", a: "nous sommes au bureau" }; 
        // "au" might be tricky if grammar not taught (√† + le). Let's simplifiy to purely listed items.
        // Revised Q5 and Q6 for Exercise 4 to strictly match lesson content.
        exercises[3].questions[4] = { q: "Traduce: 'Tengo 20 a√±os.'", a: "j'ai 20 ans" };
        exercises[3].questions[5] = { q: "Traduce: '√âl parece (tiene aspecto de) contador.'", a: "il a l'air comptable" };


        // INITIALIZATION
        let activeInput = null;

        document.addEventListener("DOMContentLoaded", () => {
            exercises.forEach(ex => renderExercise(ex));
        });

        function renderExercise(exData) {
            const container = document.getElementById(`container-${exData.id}`);
            
            exData.questions.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = "border-b border-gray-200 pb-4 last:border-0";
                div.innerHTML = `
                    <label class="block text-gray-700 font-semibold mb-1">
                        <span class="text-indigo-600 mr-2">${index + 1}.</span> ${item.q}
                    </label>
                    <div class="flex gap-2 flex-col sm:flex-row">
                        <input type="text" 
                            id="${exData.id}-q${index}" 
                            class="w-full sm:w-2/3 p-2 border border-gray-300 rounded focus:ring-2 focus:ring-indigo-200 focus:border-indigo-500 outline-none transition"
                            placeholder="Escribe tu respuesta..."
                            onfocus="setActiveInput(this)"
                            autocomplete="off">
                        <button onclick="validate('${exData.id}', ${index}, '${item.a.replace(/'/g, "\\'")}')" 
                            class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition shadow-sm sm:w-1/3">
                            Verificar
                        </button>
                    </div>
                    <div id="feedback-${exData.id}-${index}" class="mt-2 text-sm hidden font-medium p-2 rounded"></div>
                `;
                container.appendChild(div);
            });
        }

        // KEYBOARD HELPER
        function setActiveInput(input) {
            activeInput = input;
        }

        function insertChar(char) {
            if (activeInput) {
                const start = activeInput.selectionStart;
                const end = activeInput.selectionEnd;
                const text = activeInput.value;
                activeInput.value = text.substring(0, start) + char + text.substring(end);
                activeInput.focus();
                activeInput.selectionStart = activeInput.selectionEnd = start + 1;
            } else {
                alert("Primero haz clic en la casilla donde quieres escribir.");
            }
        }

        // VALIDATION LOGIC
        function validate(exId, qIndex, correctAnswer) {
            const input = document.getElementById(`${exId}-q${qIndex}`);
            const feedback = document.getElementById(`feedback-${exId}-${qIndex}`);
            
            // Normalize answer: remove punctuation at end, trim whitespace, lowercase
            let userAnswer = input.value.trim().toLowerCase();
            if(userAnswer.endsWith('.')) userAnswer = userAnswer.slice(0, -1);

            const cleanCorrect = correctAnswer.toLowerCase();

            feedback.classList.remove("hidden", "correct-answer", "wrong-answer");

            if (userAnswer === cleanCorrect) {
                input.classList.add("border-green-500", "bg-green-50");
                input.classList.remove("border-red-500", "bg-red-50");
                feedback.textContent = "‚úÖ ¬°Correcto! Tr√®s bien.";
                feedback.classList.add("correct-answer");
                checkGlobalProgress();
            } else {
                input.classList.add("border-red-500", "bg-red-50");
                input.classList.remove("border-green-500", "bg-green-50");
                feedback.innerHTML = `‚ùå Incorrecto. <br> La respuesta correcta es: <strong>${correctAnswer}</strong>`;
                feedback.classList.add("wrong-answer");
            }
        }

        function checkGlobalProgress() {
            // Simple check if all inputs have the green class
            const inputs = document.querySelectorAll('input[type="text"]');
            const total = inputs.length;
            const correct = document.querySelectorAll('.border-green-500').length;

            if (correct === total) {
                document.getElementById('final-success').classList.remove('hidden');
                window.scrollTo(0, document.body.scrollHeight);
            }
        }
    </script>
</body>
</html>